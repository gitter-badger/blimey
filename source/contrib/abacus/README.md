This is a snapshot of code taken from: https://github.com/sungiant/abacus with a bunch of stuff removed.